exports["ResourceStore save stores resources in individual named graphs"] = "PREFIX as: <https://www.w3.org/ns/activitystreams#>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX hydra: <http://www.w3.org/ns/hydra/core#>\n\n\n\nINSERT{\n  \n      GRAPH <https://cube-creator.lndo.site/activity/test-activity> {\n        <https://cube-creator.lndo.site/activity/test-activity> a ?type ;\n        as:startTime ?now ;\n        as:endTime ?now ;\n        as:object ?object ;\n        \n      }\n} WHERE {\n\n        BIND ( \"2021-10-26T08:00:00.000Z\"^^xsd:dateTime as ?now )\n        BIND ( <http://example.com/Foo> as ?object )\n        BIND (\n          IF(EXISTS { GRAPH <http://example.com/Foo> { <http://example.com/Foo> ?p ?o } }, as:Update, as:Create) as ?type\n        )\n      \n};\n\nDROP SILENT GRAPH <http://example.com/Foo>;\n\nINSERT DATA {\n  \n      GRAPH <http://example.com/Foo> {\n        <http://example.com/Foo> rdf:type hydra:Resource .\n<http://example.com/Foo> <http://example.com/foo> \"foo\" .\n      }\n    \n};\n\nINSERT{\n  \n      GRAPH <https://cube-creator.lndo.site/activity/test-activity> {\n        <https://cube-creator.lndo.site/activity/test-activity> a ?type ;\n        as:startTime ?now ;\n        as:endTime ?now ;\n        as:object ?object ;\n        \n      }\n} WHERE {\n\n        BIND ( \"2021-10-26T08:00:00.000Z\"^^xsd:dateTime as ?now )\n        BIND ( <http://example.com/Bar> as ?object )\n        BIND (\n          IF(EXISTS { GRAPH <http://example.com/Bar> { <http://example.com/Bar> ?p ?o } }, as:Update, as:Create) as ?type\n        )\n      \n};\n\nDROP SILENT GRAPH <http://example.com/Bar>;\n\nINSERT DATA {\n  \n      GRAPH <http://example.com/Bar> {\n        <http://example.com/Bar> rdf:type hydra:Resource .\n<http://example.com/Bar> <http://example.com/bar> \"bar\" .\n      }\n    \n};";

exports["ResourceStore save only saves changed resources"] = "PREFIX as: <https://www.w3.org/ns/activitystreams#>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\n\n\nINSERT{\n  \n      GRAPH <https://cube-creator.lndo.site/activity/test-activity> {\n        <https://cube-creator.lndo.site/activity/test-activity> a ?type ;\n        as:startTime ?now ;\n        as:endTime ?now ;\n        as:object ?object ;\n        \n      }\n} WHERE {\n\n        BIND ( \"2021-10-26T08:00:00.000Z\"^^xsd:dateTime as ?now )\n        BIND ( <baz> as ?object )\n        BIND (\n          IF(EXISTS { GRAPH <baz> { <baz> ?p ?o } }, as:Update, as:Create) as ?type\n        )\n      \n};\n\nDROP SILENT GRAPH <baz>;\n\nINSERT DATA {\n  \n      GRAPH <baz> {\n        <baz> rdfs:label \"Baz changed\" .\n      }\n    \n};";

exports["ResourceStore save only deletes graph if all resource triples were removed"] = "PREFIX as: <https://www.w3.org/ns/activitystreams#>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n\n\n\nDROP SILENT GRAPH <baz>;\n\nINSERT DATA {\n  \n      GRAPH <https://cube-creator.lndo.site/activity/test-activity> {\n        <https://cube-creator.lndo.site/activity/test-activity> a as:Delete ;\n        as:startTime \"2021-10-26T08:00:00.000Z\"^^xsd:dateTime ;\n        as:endTime \"2021-10-26T08:00:00.000Z\"^^xsd:dateTime ;\n        as:object <baz> ;\n        \n      }\n};";

exports["ResourceStore delete delete is adding DROP SILENT GRAPH statement and removes from inserts"] = "PREFIX as: <https://www.w3.org/ns/activitystreams#>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n\n\n\nDROP SILENT GRAPH <http://example.com/Foo>;\n\nINSERT DATA {\n  \n      GRAPH <https://cube-creator.lndo.site/activity/test-activity> {\n        <https://cube-creator.lndo.site/activity/test-activity> a as:Delete ;\n        as:startTime \"2021-10-26T08:00:00.000Z\"^^xsd:dateTime ;\n        as:endTime \"2021-10-26T08:00:00.000Z\"^^xsd:dateTime ;\n        as:object <http://example.com/Foo> ;\n        \n      }\n};";

